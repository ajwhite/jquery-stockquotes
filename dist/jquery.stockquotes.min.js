!function(t){"use strict";function e(t,e){t in f||(f[t]=[]),f[t].push(e),s()}function s(){p&&clearTimeout(p),p=setTimeout(a,u)}function i(t){m[t]=t,s()}function n(){return t.ajax({url:l,data:{base:"USD",symbols:Object.keys(m).join(",")},dataType:"jsonp",method:"GET"}).then(function(t){return t})}function o(e){return t.ajax({url:h,data:{symbol:e},dataType:"jsonp",method:"GET"}).then(function(t){return t})}function a(){n().then(function(t){C=Object.assign({},C,t.rates),r()}).fail(function(){r()})}function r(){var e,s=[];for(e in f)s.push(o(e));t.when.apply(t,s).done(function(){var t,e,s,i=Array.prototype.slice.call(arguments);for(e=0;e<i.length;e++)for(t in f)if(i[e].Symbol===t)for(s=0;s<f[t].length;s++)f[t][s].updateQuote(i[e],C)}).fail(function(t){console.log("err",t)})}function c(s,n,o,a){this.options=t.extend({},d,a),this.$element=t(s),this.currency="string"==typeof a.currency?a.currency.toUpperCase():o,this.$price=null,this.options.includePrice&&(this.$price=t("<span />").addClass(this.options.priceClass),this.$element.append(this.$price),this.$element.append(" ")),this.options.includeSymbol&&this.$element.append(n),this.$element.append(" "),this.$change=t("<span />").addClass(this.options.changeClass),this.$quote=t("<span />").addClass(this.options.quoteClass),this.$element.append(this.$change),this.$element.append(this.$quote),i(this.currency),e(n,this)}var p,h="http://dev.markitondemand.com/Api/v2/Quote/jsonp",l="https://api.fixer.io/latest",u=200,d={positiveClass:"up",negativeClass:"down",changeClass:"change",quoteClass:"quote",priceClass:"price",currency:"USD",precision:2,includeSymbol:!0,includePrice:!1},f={},m={},C={USD:1};c.prototype.updateQuote=function(t,e){this.$element.removeClass(this.options.positiveClass).removeClass(this.options.negativeClass),t.Change>0?this.$element.addClass(this.options.positiveClass):t.Change<0&&this.$element.addClass(this.options.negativeClass),this.$price&&this.$price.html("$"+Math.abs(t.LastPrice*(e[this.currency]||1)).toFixed(this.options.precision).toLocaleString()),this.$quote.html(Math.abs(t.Change).toFixed(this.options.precision))},t.fn.stockQuotes=t.fn.stockQuote=function(e){return e=t.isPlainObject(e)?e:{},this.each(function(){var s=t(this).attr("data-symbol"),i=t(this).attr("data-currency");i="string"==typeof i?i.toUpperCase():"USD",s&&(s=s.toUpperCase().trim(),t(this).data("stockquote",new c(this,s,i,e)))})}}(jQuery);